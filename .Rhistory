plot.title = element_markdown())
ind_preds <- predictions(model_std,
newdata = datagrid(id = data$id,
zelemiq_avg_std = seq(min(data$zelemiq_avg_std, na.rm = TRUE),
max(data$zelemiq_avg_std, na.rm = TRUE),
by=0.01))
)
ggplot(ind_preds, aes(x = zelemiq_avg_std, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
data$z_sd <- sd(data$zelemiq_avg, na.rm=TRUE)
data <- data %>%
# group_by(id) %>%
mutate(zelemiq_avg_std = (zelemiq_avg - z_mean)/ z_sd)
model_std <- lmer(lactate ~ zelemiq_avg_std + (zelemiq_avg_std | id),
data = data,
REML = TRUE)
model_std_preds <- predictions(model_std,
newdata = datagrid(id = NA,
zelemiq_avg_std = seq(min(data$zelemiq_avg_std, na.rm = TRUE),
max(data$zelemiq_avg_std, na.rm = TRUE),
by=0.01)),
re.form = NA,
type = "response")
ggplot(model_std_preds, aes(x = zelemiq_avg_std, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model_std predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
ind_preds <- predictions(model_std,
newdata = datagrid(id = data$id,
zelemiq_avg_std = seq(min(data$zelemiq_avg_std, na.rm = TRUE),
max(data$zelemiq_avg_std, na.rm = TRUE),
by=0.01))
)
ggplot(ind_preds, aes(x = zelemiq_avg_std, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
data <- data %>%
group_by(id) %>%
mutate(zelemiq_avg_std = zelemiq_avg - min(zelemiq_avg, na_rm = TRUE))
model_std <- lmer(lactate ~ zelemiq_avg_std + (zelemiq_avg_std | id),
data = data,
REML = TRUE)
data <- data %>%
group_by(id) %>%
mutate(zelemiq_avg_std = zelemiq_avg - first(zelemiq_avg, na_rm = TRUE))
model_std <- lmer(lactate ~ zelemiq_avg_std + (zelemiq_avg_std | id),
data = data,
REML = TRUE)
model_std_preds <- predictions(model_std,
newdata = datagrid(id = NA,
zelemiq_avg_std = seq(min(data$zelemiq_avg_std, na.rm = TRUE),
max(data$zelemiq_avg_std, na.rm = TRUE),
by=0.01)),
re.form = NA,
type = "response")
ggplot(model_std_preds, aes(x = zelemiq_avg_std, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model_std predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
performance::check_model(model_std)
ind_preds <- predictions(model_std,
newdata = datagrid(id = data$id,
zelemiq_avg_std = seq(min(data$zelemiq_avg_std, na.rm = TRUE),
max(data$zelemiq_avg_std, na.rm = TRUE),
by=0.01))
)
ggplot(ind_preds, aes(x = zelemiq_avg_std, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
model <- lmer(lactate ~ 0 + zelemiq_avg + (0 + zelemiq_avg | id),
data = data,
REML = TRUE)
model_preds <- predictions(model,
newdata = datagrid(id = NA,
zelemiq_avg = seq(0.4,0.6, by=0.01)),
re.form = NA,
type = "response")
ggplot(model_preds, aes(x = zelemiq_avg, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
ind_preds <- predictions(model,
newdata = datagrid(id = data$id,
zelemiq_avg = seq(0.4,0.6, by=0.01)))
ggplot(ind_preds, aes(x = zelemiq_avg, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
model
# Adjust in model for baseline
data <- data %>%
group_by(id) %>%
mutate(zelemiq_avg_cov = first(zelemiq_avg, na_rm = TRUE))
# Adjust in model for baseline
data <- data %>%
group_by(id) %>%
mutate(zelemiq_avg_baseline = first(zelemiq_avg, na_rm = TRUE))
model_cov <- lmer(lactate ~ zelemiq_avg + zelemiq_avg_baseline + (zelemiq_avg | id),
data = data,
REML = TRUE)
performance::check_model(model_cov)
model_cov_preds <- predictions(model_cov,
newdata = datagrid(id = NA,
zelemiq_avg_cov = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01)),
re.form = NA,
type = "response")
model_cov_preds <- predictions(model_cov,
newdata = datagrid(id = NA,
zelemiq_avg_cov = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01),
zelemiq_avg_baseline = mean(data$zelemiq_avg_baseline)),
re.form = NA,
type = "response")
model_cov <- lmer(lactate ~ zelemiq_avg + zelemiq_avg_baseline + (zelemiq_avg | id),
data = data,
REML = TRUE)
model_cov_preds <- predictions(model_cov,
newdata = datagrid(id = NA,
zelemiq_avg_cov = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01),
zelemiq_avg_baseline = mean(data$zelemiq_avg_baseline)),
re.form = NA,
type = "response")
model_cov_preds <- predictions(model_cov,
newdata = datagrid(id = NA,
zelemiq_avg = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01),
zelemiq_avg_baseline = mean(data$zelemiq_avg_baseline)),
re.form = NA,
type = "response")
ggplot(model_cov_preds, aes(x = zelemiq_avg_cov, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model_cov predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
ggplot(model_cov_preds, aes(x = zelemiq_avg, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model_cov predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
model_cov_preds <- predictions(model_cov,
newdata = datagrid(id = NA,
zelemiq_avg = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01),
zelemiq_avg_baseline = 0),
re.form = NA,
type = "response")
ggplot(model_cov_preds, aes(x = zelemiq_avg, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model_cov predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
model_cov_preds <- predictions(model_cov,
newdata = datagrid(id = NA,
zelemiq_avg = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01),
zelemiq_avg_baseline = NA),
re.form = NA,
type = "response")
ggplot(model_cov_preds, aes(x = zelemiq_avg, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model_cov predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
model_cov_preds <- predictions(model_cov,
newdata = datagrid(id = NA,
zelemiq_avg = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01),
zelemiq_avg_baseline = mean(data$zelemiq_avg_baseline)),
re.form = NA,
type = "response")
ggplot(model_cov_preds, aes(x = zelemiq_avg, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model_cov predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
ind_preds <- predictions(model_cov,
newdata = datagrid(id = data$id,
zelemiq_avg_cov = seq(min(data$zelemiq_avg_cov, na.rm = TRUE),
max(data$zelemiq_avg_cov, na.rm = TRUE),
by=0.01)),
zelemiq_avg_baseline = unique(data$zelemiq_avg_baseline),
)
ind_preds <- predictions(model_cov,
newdata = datagrid(id = data$id,
zelemiq_avg = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01)),
zelemiq_avg_baseline = unique(data$zelemiq_avg_baseline),
)
ind_preds <- predictions(model_cov,
newdata = datagrid(id = data$id,
zelemiq_avg = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01),
zelemiq_avg_baseline = unique(data$zelemiq_avg_baseline))
)
ggplot(ind_preds, aes(x = zelemiq_avg_cov, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
ggplot(ind_preds, aes(x = zelemiq_avg, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
View(ind_preds)
ind_preds <- predictions(model_cov,
newdata = datagrid(id = data$id,
zelemiq_avg = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01),
zelemiq_avg_baseline = data$zelemiq_avg_baseline)
)
ind_preds <- predictions(model_cov,
newdata = datagrid(id = data$id,
zelemiq_avg = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01))
)
ggplot(ind_preds, aes(x = zelemiq_avg, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
model_cov_preds <- predictions(model_cov,
newdata = datagrid(id = NA,
zelemiq_avg = seq(min(data$zelemiq_avg, na.rm = TRUE),
max(data$zelemiq_avg, na.rm = TRUE),
by=0.01)),
re.form = NA,
type = "response")
ggplot(model_cov_preds, aes(x = zelemiq_avg, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model_cov predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
# Adjust at unit level for baseline
data <- data %>%
group_by(id) %>%
mutate(zelemiq_avg_adj = zelemiq_avg - first(zelemiq_avg, na_rm = TRUE))
model_adj <- lmer(lactate ~ zelemiq_avg_adj + (zelemiq_avg_adj | id),
data = data,
REML = TRUE)
performance::check_model(model_adj)
model_adj_preds <- predictions(model_adj,
newdata = datagrid(id = NA,
zelemiq_avg_adj = seq(min(data$zelemiq_avg_adj, na.rm = TRUE),
max(data$zelemiq_avg_adj, na.rm = TRUE),
by=0.01)),
re.form = NA,
type = "response")
ggplot(model_adj_preds, aes(x = zelemiq_avg_adj, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model_adj predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
ind_preds <- predictions(model_adj,
newdata = datagrid(id = data$id,
zelemiq_avg_adj = seq(min(data$zelemiq_avg_adj, na.rm = TRUE),
max(data$zelemiq_avg_adj, na.rm = TRUE),
by=0.01))
)
ggplot(ind_preds, aes(x = zelemiq_avg_adj, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
performance::compare_performance(model, model_adj)
performance::compare_performance(model, model_adj, rank = TRUE)
(
ggplot(ind_preds, aes(x = zelemiq_avg_adj, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown()))
(
ggplot(model_adj_preds, aes(x = zelemiq_avg_adj, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model_adj predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown()) ) +
(
ggplot(ind_preds, aes(x = zelemiq_avg_adj, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown()))
(
ggplot(ind_preds, aes(x = zelemiq_avg_adj, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())) +
(
ggplot(model_adj_preds, aes(x = zelemiq_avg_adj, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data, aes(y=lactate), alpha=0.25) +
labs(x = "Zelemiq Ltd Output",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Conditional model_adj predictions") +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown()) )
targets::tar_visnetwork()
targets::tar_visnetwork()
targets::tar_visnetwork()
targets::tar_make()
targets::tar_visnetwork()
targets::tar_make()
targets::tar_make()
targets::tar_make()
ggplot(ind_preds, aes(x = zelemiq_avg_adj, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data_adj=data_adj, aes(y=lactate), alpha=0.25) +
labs(x = "Baseline Adjusted Zelemiq Ltd Output (10 sample moving average)",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
targets::tar_make()
data_adj  data %>%
data_adj <- data %>%
group_by(id) %>%
mutate(zelemiq_avg_adj = zelemiq_avg - first(zelemiq_avg, na_rm = TRUE))
ggplot(ind_preds, aes(x = zelemiq_avg_adj, y = estimate)) +
geom_hline(yintercept = 0, linetype = "dashed") +
geom_ribbon(aes(ymin=conf.low, ymax=conf.high), alpha = 0.25) +
geom_line(size=1) +
geom_point(data=data_adj, aes(y=lactate), alpha=0.25) +
labs(x = "Baseline Adjusted Zelemiq Ltd Output (10 sample moving average)",
y = bquote("Blood Lactate (mmol."~L^-1~")"),
title = "Individual participant level predictions") +
facet_wrap("id", nrow = 2) +
theme_bw() +
theme(panel.grid=element_blank(),
plot.title = element_markdown())
targets::tar_make()
targets::tar_make()
targets::tar_make()
targets::tar_make()
targets::tar_make()
renv::init("sjPlot")
